const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const n=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(n)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnLock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("_lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnLock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("_lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}function testWebP(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".popup.open"))}})),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),document.addEventListener("DOMContentLoaded",(function(){let e="Иван Иванович",t="+ 7 (929) 572-86-00",n="ivanivan@ingos.ru";console.log(e),console.log(t),console.log(n);let o=document.querySelectorAll(".form__inputs"),l=document.querySelectorAll(".form__input");o.forEach((function(e,t){e.addEventListener("click",(function(n){e.classList.remove("_error"),l[t].classList.remove("_error")}))}));let c=document.querySelectorAll("input[data-tel-input]"),i=function(e){return e.value.replace(/\D/g,"")},s=function(e){let t=e.target,n=i(t),o=e.clipboardData||window.clipboardData;if(o){let e=o.getData("Text");if(/\D/g.test(e))return void(t.value=n)}},r=function(e){let t=e.target,n=i(t),o=t.selectionStart,l="";if(!n)return t.value="";if(t.value.length==o){if(["7","8","9"].indexOf(n[0])>-1){"9"==n[0]&&(n="7"+n);let e="8"==n[0]?"8":"+ 7";l=t.value=e+" ",n.length>1&&(l+="("+n.substring(1,4)),n.length>=5&&(l+=") "+n.substring(4,7)),n.length>=8&&(l+="-"+n.substring(7,9)),n.length>=10&&(l+="-"+n.substring(9,11))}else l="+"+n.substring(0,16);t.value=l}else e.data&&/\D/g.test(e.data)&&(t.value=n)},u=function(e){let t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(let e of c)e.addEventListener("keydown",u),e.addEventListener("input",r,!1),e.addEventListener("paste",s,!1);const a=document.querySelector(".form");function d(e){e.parentElement.classList.add("_error"),e.classList.add("_error"),e.parentElement.classList.remove("_validate")}function p(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function g(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}a.addEventListener("submit",(function(l){l.preventDefault(),async function(l){if(0===function(o){let l=0,c=o.querySelectorAll(".form__require"),i=o.querySelectorAll("._reg");for(let o=0;o<i.length;o++){const s=i[o],r=c[o];p(s),s.parentElement.classList.add("_validate"),""===s.value?(d(s),l++,r.innerHTML="Заполните поле."):s.classList.contains("_email")?(g(s)&&(d(s),l++),s.value!=n&&(l++,d(s),r.innerHTML="Почта не найдена.")):s.classList.contains("_phone")?s.value!=t&&(l++,d(s),r.innerHTML="Номер не найден."):s.classList.contains("_username")?s.value!=e&&(console.log(s.value),l++,d(s),r.innerHTML="Проверьте поле на правильность заполения."):"checkbox"===s.getAttribute("type")&&!1===s.checked&&(d(s),l++)}return l}(l)){document.querySelector(".popup").classList.add("open"),l.reset();for(let e of o)e.classList.remove("_validate")}}(a)}))}));